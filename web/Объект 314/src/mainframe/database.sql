CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    first_name TEXT,
    last_name TEXT,
    class VARCHAR(5),
    birth_date DATE,
    enrollment_year INT,
    status TEXT
);

CREATE TABLE students_anomalies (
    student_id INT,
    anomaly_type TEXT,
    last_seen TIMESTAMP,
    severity INT,
    notes TEXT
);

INSERT INTO students (first_name, last_name, class, birth_date, enrollment_year, status)
VALUES
('Михайловна', 'Кира', '9A', '2010-12-18', 2016, 'active'),
('Валентинович', 'Куприян', '11B', '2008-05-02', 2014, '066'),
('Антонина', 'Киселева', '7A', '2010-05-22', 2016, 'active'),
('Лукия', 'Ширяева', '7V', '2010-05-16', 2016, 'transferred'),
('Сергей', 'Филатов', '9B', '2006-08-14', 2012, 'active'),
('тов.', 'Зиновьев', '11A', '2011-08-18', 2017, 'active'),
('Богдановна', 'Марина', '10B', '2007-01-07', 2013, 'active'),
('Ануфриевич', 'Ефрем', '9A', '2006-05-13', 2012, 'active'),
('Федор', 'Карпов', '11B', '2008-10-05', 2014, 'active'),
('Пелагея', 'Русакова', '8A', '2012-01-28', 2018, 'active'),
('Архипович', 'Панфил', '8B', '2008-03-02', 2014, 'active'),
('Алексей', 'Бирюков', '9B', '2012-01-21', 2018, 'active'),
('Эдуардович', 'Викторин', '7B', '2008-06-23', 2014, 'active'),
('Григорьевич', 'Андроник', '9A', '2007-07-17', 2013, 'active'),
('Ратмир', 'Лазарев', '8V', '2009-05-16', 2015, '066'),
('Руслановна', 'Кира', '7V', '2007-01-06', 2013, 'unknown'),
('Афанасьевна', 'Алина', '8V', '2007-05-29', 2013, 'active'),
('Агафон', 'Петухов', '7B', '2009-02-09', 2015, 'active'),
('Фокич', 'Геннадий', '9B', '2009-06-15', 2015, 'active'),
('Станиславовна', 'Марина', '7A', '2006-08-01', 2012, 'active'),
('Семеновна', 'Анна', '9A', '2011-05-27', 2017, '066'),
('Феврония', 'Кошелева', '10B', '2006-06-21', 2012, 'active'),
('Леоновна', 'Зоя', '7V', '2010-06-30', 2016, 'active'),
('Владимир', 'Сорокин', '7B', '2008-09-26', 2014, 'active'),
('Артурович', 'Селиверст', '7V', '2012-03-28', 2018, 'active'),
('Фадеевич', 'Милован', '9B', '2011-07-02', 2017, 'active'),
('Оксана', 'Блинова', '8B', '2007-02-28', 2013, 'active'),
('Виктория', 'Гуляева', '10A', '2006-07-28', 2012, '066'),
('Руслан', 'Костин', '10V', '2011-10-30', 2017, 'active'),
('Януарий', 'Лыткин', '10V', '2007-05-18', 2013, 'active'),
('Кира', 'Лаврентьева', '10B', '2010-09-17', 2016, 'active'),
('Тимурович', 'Андрей', '10A', '2009-06-16', 2015, 'active'),
('Ильясович', 'Ратибор', '8V', '2011-09-03', 2017, 'active'),
('Аникей', 'Пестов', '8A', '2010-06-07', 2016, 'active'),
('Сила', 'Носов', '10B', '2010-08-11', 2016, 'active'),
('Арсений', 'Аксенов', '11B', '2009-10-29', 2015, 'transferred'),
('Филатович', 'Амвросий', '9A', '2012-02-19', 2018, 'transferred'),
('Полина', 'Новикова', '10V', '2008-06-11', 2014, 'active'),
('Аскольд', 'Казаков', '9B', '2009-05-09', 2015, 'active'),
('Артёмович', 'Михей', '9V', '2007-07-08', 2013, 'unknown'),
('Гертрудович', 'Авдей', '11V', '2012-01-11', 2018, 'active'),
('Брониславович', 'Радован', '8B', '2009-03-24', 2015, 'unknown'),
('Вероника', 'Самсонова', '9V', '2008-03-11', 2014, '066'),
('Афанасий', 'Филатов', '7V', '2009-11-14', 2015, '066'),
('Евгения', 'Тарасова', '11A', '2008-08-26', 2014, 'active'),
('Эрнст', 'Наумов', '11B', '2012-04-09', 2018, 'active'),
('Милица', 'Гущина', '10A', '2009-11-19', 2015, 'active'),
('Зинаида', 'Захарова', '7B', '2009-03-11', 2015, 'active'),
('Матвеевна', 'Вероника', '8A', '2011-09-02', 2017, 'unknown'),
('Арсеньевич', 'Гремислав', '8V', '2008-10-05', 2014, 'active'),
('Тихон', 'Тихонов', '7A', '2008-08-31', 2014, 'active'),
('Виссарион', 'Игнатов', '9V', '2009-09-16', 2015, 'active'),
('Валентиновна', 'Октябрина', '8V', '2011-12-25', 2017, '066'),
('Ладимир', 'Зуев', '10V', '2010-07-06', 2016, 'active'),
('Януарий', 'Белозеров', '9B', '2006-07-07', 2012, 'transferred'),
('Николай', 'Зимин', '9A', '2009-05-15', 2015, 'active'),
('Якуб', 'Андреев', '9V', '2008-08-05', 2014, 'active'),
('Лора', 'Романова', '8B', '2011-10-23', 2017, 'active'),
('Пелагея', 'Котова', '10A', '2008-03-03', 2014, 'active'),
('Гертрудович', 'Порфирий', '8B', '2006-09-20', 2012, 'active'),
('Елизавета', 'Морозова', '10A', '2007-11-20', 2013, 'active'),
('Федотович', 'Арсений', '11B', '2008-03-09', 2014, 'active'),
('Федоровна', 'Марфа', '7B', '2008-03-05', 2014, 'active'),
('Лукия', 'Григорьева', '11B', '2007-03-02', 2013, 'active'),
('Кузьминична', 'Анжелика', '9A', '2010-11-08', 2016, 'active'),
('Лидия', 'Рожкова', '9V', '2006-07-17', 2012, '066');

INSERT INTO students_anomalies (student_id, anomaly_type, last_seen, severity, notes) VALUES
(3, 'тень без источника', '2025-03-12 07:58:42', 4, 'Зафиксировано наличие тени в раздевалке при отсутствии физического объекта. Тень двигалась с задержкой от предполагаемого владельца на 3–4 секунды.'),
(12, 'искажение времени', '2025-03-25 13:17:05', 5, 'Ученик был замечен в столовой одновременно с его присутствием в кабинете информатики. Запись с камер противоречит журналу посещений.'),
(27, 'отказ от распознавания лиц', '2025-03-30 11:42:18', 3, 'На всех фотографиях класса лицо ученика размазано или заменено фоном. Сканеры пропуска не фиксируют его ID.'),
(31, 'вторичный отпечаток личности', '2025-04-03 08:51:30', 5, 'При разговоре с педагогом ученик воспроизвёл личные воспоминания, не свойственные его возрасту и биографии. Возможная наложенная психо-сущность.'),
(45, 'эмпатическое заражение', '2025-04-08 10:26:00', 4, 'После конфликта с данным учеником трое одноклассников в течение недели демонстрировали идентичное поведение и эмоциональные реакции.'),
(53, 'неотражаемость', '2025-04-05 09:13:10', 5, 'Ученик отсутствует на зеркальных поверхностях в туалете третьего этажа. Попытки зафиксировать через фототехнику не увенчались успехом.'),
(66, 'аудиоартефакты вне расписания', '2025-03-27 18:19:44', 4, 'Из помещения кабинета физики доносился голос ученика после окончания занятий. Кабинет был заперт. Запись воспроизводит отрывки монолога о “TyumenCTF{d0nT_tru5t_7he_h34dm4st3r}”.'),
(77, 'двойное восприятие', '2025-04-11 12:33:27', 3, 'Разные свидетели описывают одно и то же взаимодействие с учеником по-разному. Один утверждает, что ученик просил помощи, другой — что он молчал и смотрел в стену.');

CREATE USER headmaster WITH PASSWORD 'valentina_forever1964!';

GRANT SELECT ON ALL TABLES IN SCHEMA public TO headmaster;
GRANT CONNECT ON DATABASE blackshift_core TO headmaster;
